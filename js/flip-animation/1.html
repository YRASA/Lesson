<!--
 * @Author: Zzceaon
 * @Date: 2020-07-03 22:50:19
 * @LastEditTime: 2020-07-03 23:14:40
 * @LastEditors: Please set LastEditors
 * @Description: js仿FLIP动画
 * @FilePath: \Course\js\flip-animation\1.html
--> 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    #box {
      width: 200px;
      height: 200px;
      border: 1px solid #000;
      transform-origin: left top;
      transition: all 3s;
      transform: scale(2);
    }
    @keyframes identifier {
      0% {},
      50% {},
      100% {}
    }
  </style>
</head>
<body>
  <div id="box"></div>
  <script>
    // FLIP
    // first
    const box = document.querySelector('#box');
    const first = box.getBoundingClientRect();
    // css 信息变化
    box.style.width = '400px';
    box.style.height = '400px';
    // last
    const last = box.getBoundingClientRect();
    console.log(first, last);
    // {
    //   top: 400,
    //   left: 100,
    //   width: 200,
    //   height: 200,
    //   ...
    // }
    // invert 前后的偏移量
    let diffW = first.width / last.width;
    let diffH = first.height / last.height;
    console.log(diffW, diffH);
    // 0.5
    // 200 -> 400 放大的

    // 400 * 400
    // play
    // 因为上面这一步 设置 width height 瞬间完成的
    // 加点过渡
    // 1.翻转回去, 缩小 scale(0.5) 200 * 200
    // 2.恢复为 scale(1) 400 * 400

    // web animation api: js 完成 动画
    // css key frame
    box.animate([
      {
        transform: `scale(${diffW})`
      },
      {
        transform: `scale(1)`
      }
    ], {
      duration: 3000,
      easing: 'ease-in-out'
    })
  </script>
</body>
</html>